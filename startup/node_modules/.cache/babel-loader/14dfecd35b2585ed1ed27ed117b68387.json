{"ast":null,"code":"import _slicedToArray from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Thumbnail,Wrapper,Header,Title,Deselector,Container}from\"./styles\";import isArray from\"lodash-es/isArray\";import noop from\"lodash-es/noop\";import HorizontalScroller from\"@/components/HorizontalScroller\";var OptionStyleSelectable=function OptionStyleSelectable(props){var styles=props.styles,title=props.title,_props$onResetClicked=props.onResetClicked,onResetClicked=_props$onResetClicked===void 0?noop:_props$onResetClicked,_props$onStyleClicked=props.onStyleClicked,onStyleClicked=_props$onStyleClicked===void 0?noop:_props$onStyleClicked,_props$selectedStyle=props.selectedStyle,selectedStyle=_props$selectedStyle===void 0?\"\":_props$selectedStyle,_props$horizontal=props.horizontal,horizontal=_props$horizontal===void 0?false:_props$horizontal,_props$showTitle=props.showTitle,showTitle=_props$showTitle===void 0?true:_props$showTitle,className=props.className,thumbColors=props.thumbColors;var isActive=function isActive(value){return!!selectedStyle&&(!Array.isArray(selectedStyle)?selectedStyle===value:selectedStyle.indexOf(value)!==-1);};var isActiveFromStyles=!!selectedStyle&&(Array.isArray(selectedStyle)?selectedStyle.length>0:styles.some(function(style){return style.value===selectedStyle;}));var ContainerElement=horizontal?HorizontalScroller:Container;var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),focusedIndex=_useState2[0],setFocusedIndex=_useState2[1];// const nextOption = (index: number) =>\nvar keyPressed=function keyPressed(event,index){switch(event.key){case\"ArrowRight\":event.preventDefault();if(index<styles.length-1){var nextButton=buttons[index+1];nextButton.focus();setFocusedIndex(index+1);}break;case\"ArrowLeft\":event.preventDefault();if(index>0){var prevButton=buttons[index-1];prevButton.focus();setFocusedIndex(index-1);}break;case\"Home\":event.preventDefault();var firstButton=buttons[0];firstButton.focus();break;case\"End\":event.preventDefault();var lastButton=buttons[buttons.length-1];lastButton.focus();break;default:break;}};var buttons=[];var setButtonRef=function setButtonRef(ref){return buttons.push(ref);};var onBlur=function onBlur(e){if(e.relatedTarget){setFocusedIndex(undefined);}};var _onClick=function onClick(value,index){setFocusedIndex(index);onStyleClicked(value);};return React.createElement(Wrapper,{isHorizontal:horizontal,className:className,\"aria-label\":title,\"aria-activedescendant\":\"\".concat(className,\"-\").concat(focusedIndex),tabIndex:0,onBlur:onBlur,role:\"listbox\",\"aria-labelledby\":\"\".concat(className,\"-title\"),\"aria-orientation\":\"horizontal\"},React.createElement(Header,null,showTitle&&React.createElement(Title,{id:\"\".concat(className,\"-title\")},title),React.createElement(Deselector,{tabIndex:-1,disabled:!isActiveFromStyles,onClick:function onClick(){return onResetClicked(selectedStyle);}},\"Deselect\")),React.createElement(ContainerElement,null,styles&&isArray(styles)&&styles.filter(function(style){return style&&typeof style.thumb===\"function\";}).map(function(_ref,index){var value=_ref.value,thumb=_ref.thumb;return React.createElement(Thumbnail,{role:\"option\",as:\"button\",ref:setButtonRef,onClick:function onClick(){return _onClick(value,index);},key:value,active:isActive(value),\"aria-selected\":isActive(value),tabIndex:-1,onKeyDown:function onKeyDown(e){return keyPressed(e,index);},id:\"\".concat(className,\"-\").concat(index)},thumb(!!thumbColors?{colors:thumbColors}:{}));})));};export default OptionStyleSelectable;","map":{"version":3,"sources":["/var/www/html/startup/src/components/Selectables/option-style-selectable.tsx"],"names":["React","useState","Thumbnail","Wrapper","Header","Title","Deselector","Container","isArray","noop","HorizontalScroller","OptionStyleSelectable","props","styles","title","onResetClicked","onStyleClicked","selectedStyle","horizontal","showTitle","className","thumbColors","isActive","value","Array","indexOf","isActiveFromStyles","length","some","style","ContainerElement","undefined","focusedIndex","setFocusedIndex","keyPressed","event","index","key","preventDefault","nextButton","buttons","focus","prevButton","firstButton","lastButton","setButtonRef","ref","push","onBlur","e","relatedTarget","onClick","filter","thumb","map","colors"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Thumbnail, Wrapper, Header, Title, Deselector, Container } from \"./styles\";\nimport isArray from \"lodash-es/isArray\";\nimport noop from \"lodash-es/noop\";\nimport HorizontalScroller from \"@/components/HorizontalScroller\";\nimport { Colors } from \"@/interfaces/Colors\";\n\ninterface IStyle {\n  value: string;\n  thumb: Function;\n}\n\ninterface IProps {\n  onResetClicked: (style: string | string[]) => void;\n  onStyleClicked: (style: string) => void;\n  selectedStyle?: string | string[];\n  styles: IStyle[];\n  title: string;\n  showTitle?: boolean;\n  horizontal?: boolean;\n  className?: string;\n  thumbColors?: Colors;\n  [key: string]: any;\n}\n\nconst OptionStyleSelectable = (props: IProps) => {\n  const {\n    styles,\n    title,\n    onResetClicked = noop,\n    onStyleClicked = noop,\n    selectedStyle = \"\",\n    horizontal = false,\n    showTitle = true,\n    className,\n    thumbColors,\n  } = props;\n  const isActive = (value: string) =>\n    !!selectedStyle && (!Array.isArray(selectedStyle) ? selectedStyle === value : selectedStyle.indexOf(value) !== -1);\n  const isActiveFromStyles =\n    !!selectedStyle &&\n    (Array.isArray(selectedStyle) ? selectedStyle.length > 0 : styles.some((style) => style.value === selectedStyle));\n\n  const ContainerElement = horizontal ? HorizontalScroller : Container;\n\n  const [focusedIndex, setFocusedIndex] = useState<number | undefined>(undefined);\n  // const nextOption = (index: number) =>\n  const keyPressed = (event: React.KeyboardEvent<HTMLElement>, index: number) => {\n    switch (event.key) {\n      case \"ArrowRight\":\n        event.preventDefault();\n        if (index < styles.length - 1) {\n          const nextButton = buttons[index + 1];\n          nextButton.focus();\n          setFocusedIndex(index + 1);\n        }\n        break;\n      case \"ArrowLeft\":\n        event.preventDefault();\n        if (index > 0) {\n          const prevButton = buttons[index - 1];\n          prevButton.focus();\n          setFocusedIndex(index - 1);\n        }\n        break;\n      case \"Home\":\n        event.preventDefault();\n        const firstButton = buttons[0];\n        firstButton.focus();\n        break;\n      case \"End\":\n        event.preventDefault();\n        const lastButton = buttons[buttons.length - 1];\n        lastButton.focus();\n\n        break;\n      default:\n        break;\n    }\n  };\n\n  let buttons: HTMLButtonElement[] = [];\n  const setButtonRef = (ref: HTMLButtonElement) => buttons.push(ref);\n\n  const onBlur = (e: React.FocusEvent<HTMLDivElement>) => {\n    if (e.relatedTarget) {\n      setFocusedIndex(undefined);\n    }\n  };\n\n  const onClick = (value: string, index: number) => {\n    setFocusedIndex(index);\n    onStyleClicked(value);\n  };\n\n  return (\n    <Wrapper\n      isHorizontal={horizontal}\n      className={className}\n      aria-label={title}\n      aria-activedescendant={`${className}-${focusedIndex}`}\n      tabIndex={0}\n      onBlur={onBlur}\n      role=\"listbox\"\n      aria-labelledby={`${className}-title`}\n      aria-orientation=\"horizontal\"\n    >\n      <Header>\n        {showTitle && <Title id={`${className}-title`}>{title}</Title>}\n        <Deselector tabIndex={-1} disabled={!isActiveFromStyles} onClick={() => onResetClicked(selectedStyle)}>\n          Deselect\n        </Deselector>\n      </Header>\n      <ContainerElement>\n        {styles &&\n          isArray(styles) &&\n          styles\n            .filter((style) => style && typeof style.thumb === \"function\")\n            .map(({ value, thumb }, index) => (\n              <Thumbnail\n                role=\"option\"\n                as=\"button\"\n                ref={setButtonRef}\n                onClick={() => onClick(value, index)}\n                key={value}\n                active={isActive(value)}\n                aria-selected={isActive(value)}\n                tabIndex={-1}\n                onKeyDown={(e: React.KeyboardEvent<HTMLElement>) => keyPressed(e, index)}\n                id={`${className}-${index}`}\n              >\n                {thumb(!!thumbColors ? { colors: thumbColors } : {})}\n              </Thumbnail>\n            ))}\n      </ContainerElement>\n    </Wrapper>\n  );\n};\n\nexport default OptionStyleSelectable;\n"]},"metadata":{},"sourceType":"module"}