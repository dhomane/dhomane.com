{"ast":null,"code":"import _defineProperty from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{ADD_STAT,RESET_STATS,ADD_STAT_POINT,REMOVE_STAT_POINT}from\"./stats.types\";var initialState={selectedStats:[],gradedStats:[],statPointsAvailable:30,totalStatPoints:30};var reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var _ref=arguments.length>1?arguments[1]:undefined,type=_ref.type,payload=_ref.payload;switch(type){case ADD_STAT:var selectedStats=state.selectedStats,gradedStats=state.gradedStats,statPointsAvailable=state.statPointsAvailable;var newStats=_toConsumableArray(selectedStats);var newGradedStats=_toConsumableArray(gradedStats);var pointsCollected=0;/* remove if adding same stat again */var index=selectedStats.findIndex(function(stat){return!!stat&&stat.name===payload.stat.name;});if(index!==-1){/* stats should be in sync with graded */newStats.splice(index,1);/* just making sure we don't remove some other stat */var gradedIndex=selectedStats.findIndex(function(stat){return!!stat&&stat.name===payload.stat.name;});/* take assigned points in store */pointsCollected+=newGradedStats[gradedIndex].level;newGradedStats.splice(index,1);}else if(selectedStats.length<4){newStats=[].concat(_toConsumableArray(selectedStats),[payload.stat]);var points=0;var newStat=_objectSpread({},payload.stat,{level:points});newGradedStats=[].concat(_toConsumableArray(gradedStats),[newStat]);}return _objectSpread({},state,{selectedStats:newStats,gradedStats:newGradedStats,statPointsAvailable:statPointsAvailable+pointsCollected});case ADD_STAT_POINT:{var stat=payload.stat;var _gradedStats=state.gradedStats,_statPointsAvailable=state.statPointsAvailable;if(_statPointsAvailable<=0){return _objectSpread({},state);}else{var _newGradedStats=_gradedStats.map(function(gradedStat){var level=gradedStat.level;if(gradedStat.name===stat.name){level=level+1;}return _objectSpread({},gradedStat,{level:level});});return _objectSpread({},state,{gradedStats:_newGradedStats,statPointsAvailable:_statPointsAvailable-1});}}case REMOVE_STAT_POINT:{var _stat=payload.stat;var _gradedStats2=state.gradedStats,_statPointsAvailable2=state.statPointsAvailable;if(_statPointsAvailable2>=40||_stat.level===0){return _objectSpread({},state);}else{var _newGradedStats2=_gradedStats2.map(function(gradedStat){var level=gradedStat.level;if(gradedStat.name===_stat.name){level=level-1;}return _objectSpread({},gradedStat,{level:level});});return _objectSpread({},state,{gradedStats:_newGradedStats2,statPointsAvailable:_statPointsAvailable2+1});}}case RESET_STATS:return _objectSpread({},initialState);default:return state;}};export default reducer;","map":{"version":3,"sources":["/var/www/html/startup/src/redux/stats/stats.reducer.ts"],"names":["ADD_STAT","RESET_STATS","ADD_STAT_POINT","REMOVE_STAT_POINT","initialState","selectedStats","gradedStats","statPointsAvailable","totalStatPoints","reducer","state","type","payload","newStats","newGradedStats","pointsCollected","index","findIndex","stat","name","splice","gradedIndex","level","length","points","newStat","map","gradedStat"],"mappings":"8iCAEA,OAASA,QAAT,CAAmBC,WAAnB,CAAgCC,cAAhC,CAAgDC,iBAAhD,KAAyE,eAAzE,CAEA,GAAMC,CAAAA,YAAyB,CAAG,CAChCC,aAAa,CAAE,EADiB,CAEhCC,WAAW,CAAE,EAFmB,CAGhCC,mBAAmB,CAAE,EAHW,CAIhCC,eAAe,CAAE,EAJe,CAAlC,CAOA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAmE,IAAlEC,CAAAA,KAAkE,2DAA7CN,YAA6C,oDAA7BO,IAA6B,MAA7BA,IAA6B,CAAvBC,OAAuB,MAAvBA,OAAuB,CACjF,OAAQD,IAAR,EACE,IAAKX,CAAAA,QAAL,IACUK,CAAAA,aADV,CAC8DK,KAD9D,CACUL,aADV,CACyBC,WADzB,CAC8DI,KAD9D,CACyBJ,WADzB,CACsCC,mBADtC,CAC8DG,KAD9D,CACsCH,mBADtC,CAGE,GAAIM,CAAAA,QAAQ,oBAAOR,aAAP,CAAZ,CACA,GAAIS,CAAAA,cAAc,oBAAOR,WAAP,CAAlB,CACA,GAAIS,CAAAA,eAAe,CAAG,CAAtB,CAEA,sCACA,GAAMC,CAAAA,KAAK,CAAGX,aAAa,CAACY,SAAd,CAAwB,SAACC,IAAD,QAAU,CAAC,CAACA,IAAF,EAAUA,IAAI,CAACC,IAAL,GAAcP,OAAO,CAACM,IAAR,CAAaC,IAA/C,EAAxB,CAAd,CACA,GAAIH,KAAK,GAAK,CAAC,CAAf,CAAkB,CAChB,yCACAH,QAAQ,CAACO,MAAT,CAAgBJ,KAAhB,CAAuB,CAAvB,EAEA,sDACA,GAAMK,CAAAA,WAAW,CAAGhB,aAAa,CAACY,SAAd,CAAwB,SAACC,IAAD,QAAU,CAAC,CAACA,IAAF,EAAUA,IAAI,CAACC,IAAL,GAAcP,OAAO,CAACM,IAAR,CAAaC,IAA/C,EAAxB,CAApB,CACA,mCACAJ,eAAe,EAAID,cAAc,CAACO,WAAD,CAAd,CAA4BC,KAA/C,CACAR,cAAc,CAACM,MAAf,CAAsBJ,KAAtB,CAA6B,CAA7B,EACD,CATD,IASO,IAAIX,aAAa,CAACkB,MAAd,CAAuB,CAA3B,CAA8B,CACnCV,QAAQ,8BAAOR,aAAP,GAAsBO,OAAO,CAACM,IAA9B,EAAR,CACA,GAAMM,CAAAA,MAAM,CAAG,CAAf,CACA,GAAMC,CAAAA,OAAO,kBACRb,OAAO,CAACM,IADA,EAEXI,KAAK,CAAEE,MAFI,EAAb,CAIAV,cAAc,8BAAOR,WAAP,GAAoBmB,OAApB,EAAd,CACD,CAED,wBACKf,KADL,EAEEL,aAAa,CAAEQ,QAFjB,CAGEP,WAAW,CAAEQ,cAHf,CAIEP,mBAAmB,CAAEA,mBAAmB,CAAGQ,eAJ7C,GAOF,IAAKb,CAAAA,cAAL,CAAqB,IACXgB,CAAAA,IADW,CACFN,OADE,CACXM,IADW,IAEXZ,CAAAA,YAFW,CAE0BI,KAF1B,CAEXJ,WAFW,CAEEC,oBAFF,CAE0BG,KAF1B,CAEEH,mBAFF,CAInB,GAAIA,oBAAmB,EAAI,CAA3B,CAA8B,CAC5B,wBACKG,KADL,EAGD,CAJD,IAIO,CACL,GAAMI,CAAAA,eAAc,CAAGR,YAAW,CAACoB,GAAZ,CAAgB,SAACC,UAAD,CAAgB,IAC/CL,CAAAA,KAD+C,CACrCK,UADqC,CAC/CL,KAD+C,CAErD,GAAIK,UAAU,CAACR,IAAX,GAAoBD,IAAI,CAACC,IAA7B,CAAmC,CACjCG,KAAK,CAAGA,KAAK,CAAG,CAAhB,CACD,CACD,wBACKK,UADL,EAEEL,KAAK,CAALA,KAFF,GAID,CATsB,CAAvB,CAWA,wBACKZ,KADL,EAEEJ,WAAW,CAAEQ,eAFf,CAGEP,mBAAmB,CAAEA,oBAAmB,CAAG,CAH7C,GAKD,CACF,CAED,IAAKJ,CAAAA,iBAAL,CAAwB,IACde,CAAAA,KADc,CACLN,OADK,CACdM,IADc,IAEdZ,CAAAA,aAFc,CAEuBI,KAFvB,CAEdJ,WAFc,CAEDC,qBAFC,CAEuBG,KAFvB,CAEDH,mBAFC,CAItB,GAAIA,qBAAmB,EAAI,EAAvB,EAA6BW,KAAI,CAACI,KAAL,GAAe,CAAhD,CAAmD,CACjD,wBACKZ,KADL,EAGD,CAJD,IAIO,CACL,GAAMI,CAAAA,gBAAc,CAAGR,aAAW,CAACoB,GAAZ,CAAgB,SAACC,UAAD,CAAgB,IAC/CL,CAAAA,KAD+C,CACrCK,UADqC,CAC/CL,KAD+C,CAErD,GAAIK,UAAU,CAACR,IAAX,GAAoBD,KAAI,CAACC,IAA7B,CAAmC,CACjCG,KAAK,CAAGA,KAAK,CAAG,CAAhB,CACD,CACD,wBACKK,UADL,EAEEL,KAAK,CAALA,KAFF,GAID,CATsB,CAAvB,CAWA,wBACKZ,KADL,EAEEJ,WAAW,CAAEQ,gBAFf,CAGEP,mBAAmB,CAAEA,qBAAmB,CAAG,CAH7C,GAKD,CACF,CAED,IAAKN,CAAAA,WAAL,CACE,wBAAYG,YAAZ,EAEF,QACE,MAAOM,CAAAA,KAAP,CAhGJ,CAkGD,CAnGD,CAqGA,cAAeD,CAAAA,OAAf","sourcesContent":["import { IStatsState } from \"@/interfaces/IStats\";\nimport { IAction } from \"@/interfaces/IAction\";\nimport { ADD_STAT, RESET_STATS, ADD_STAT_POINT, REMOVE_STAT_POINT } from \"./stats.types\";\n\nconst initialState: IStatsState = {\n  selectedStats: [],\n  gradedStats: [],\n  statPointsAvailable: 30,\n  totalStatPoints: 30,\n};\n\nconst reducer = (state: IStatsState = initialState, { type, payload }: IAction) => {\n  switch (type) {\n    case ADD_STAT:\n      const { selectedStats, gradedStats, statPointsAvailable } = state;\n\n      let newStats = [...selectedStats];\n      let newGradedStats = [...gradedStats];\n      let pointsCollected = 0;\n\n      /* remove if adding same stat again */\n      const index = selectedStats.findIndex((stat) => !!stat && stat.name === payload.stat.name);\n      if (index !== -1) {\n        /* stats should be in sync with graded */\n        newStats.splice(index, 1);\n\n        /* just making sure we don't remove some other stat */\n        const gradedIndex = selectedStats.findIndex((stat) => !!stat && stat.name === payload.stat.name);\n        /* take assigned points in store */\n        pointsCollected += newGradedStats[gradedIndex].level;\n        newGradedStats.splice(index, 1);\n      } else if (selectedStats.length < 4) {\n        newStats = [...selectedStats, payload.stat];\n        const points = 0;\n        const newStat = {\n          ...payload.stat,\n          level: points,\n        };\n        newGradedStats = [...gradedStats, newStat];\n      }\n\n      return {\n        ...state,\n        selectedStats: newStats,\n        gradedStats: newGradedStats,\n        statPointsAvailable: statPointsAvailable + pointsCollected,\n      };\n\n    case ADD_STAT_POINT: {\n      const { stat } = payload;\n      const { gradedStats, statPointsAvailable } = state;\n\n      if (statPointsAvailable <= 0) {\n        return {\n          ...state,\n        };\n      } else {\n        const newGradedStats = gradedStats.map((gradedStat) => {\n          let { level } = gradedStat;\n          if (gradedStat.name === stat.name) {\n            level = level + 1;\n          }\n          return {\n            ...gradedStat,\n            level,\n          };\n        });\n\n        return {\n          ...state,\n          gradedStats: newGradedStats,\n          statPointsAvailable: statPointsAvailable - 1,\n        };\n      }\n    }\n\n    case REMOVE_STAT_POINT: {\n      const { stat } = payload;\n      const { gradedStats, statPointsAvailable } = state;\n\n      if (statPointsAvailable >= 40 || stat.level === 0) {\n        return {\n          ...state,\n        };\n      } else {\n        const newGradedStats = gradedStats.map((gradedStat) => {\n          let { level } = gradedStat;\n          if (gradedStat.name === stat.name) {\n            level = level - 1;\n          }\n          return {\n            ...gradedStat,\n            level,\n          };\n        });\n\n        return {\n          ...state,\n          gradedStats: newGradedStats,\n          statPointsAvailable: statPointsAvailable + 1,\n        };\n      }\n    }\n\n    case RESET_STATS:\n      return { ...initialState };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}