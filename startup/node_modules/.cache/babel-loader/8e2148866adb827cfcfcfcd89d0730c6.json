{"ast":null,"code":"import _slicedToArray from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{memo,useState,createContext,useContext,useRef,useEffect}from\"react\";import noop from\"lodash-es/noop\";import clsx from\"clsx\";import EventEmitter from\"@/utils/event-emitter\";var initialContext={activeTab:1,changeTab:noop,prevTab:noop,nextTab:noop,firstTab:noop,lastTab:noop};var context=createContext(initialContext);var Provider=context.Provider;var Tab=function Tab(props){var id=props.id,children=props.children,className=props.className,rest=_objectWithoutProperties(props,[\"id\",\"children\",\"className\"]);var _useContext=useContext(context),changeTab=_useContext.changeTab,activeTab=_useContext.activeTab,prevTab=_useContext.prevTab,nextTab=_useContext.nextTab,firstTab=_useContext.firstTab,lastTab=_useContext.lastTab;var tabRef=useRef(null);var keyPressed=function keyPressed(event){switch(event.key){case\"ArrowUp\":prevTab();break;case\"ArrowDown\":nextTab();break;case\"Home\":firstTab();break;case\"End\":lastTab();break;default:break;}};useEffect(function(){if(activeTab===id){if(tabRef&&tabRef.current){tabRef.current.focus();}}},[id,activeTab]);return React.createElement(\"button\",Object.assign({ref:tabRef,onKeyDown:keyPressed,className:clsx(\"tab-button\",activeTab===id&&\" tab-button--active\",activeTab!==id&&\" tab-button--inactive\",\"hoverable\",className),role:\"tab\",tabIndex:activeTab===id?0:-1,\"aria-selected\":activeTab===id,\"aria-controls\":\"\".concat(id,\"-panel\"),onClick:function onClick(_ref){var target=_ref.target;return changeTab(id,target);}},rest),children);};var TabPanel=function TabPanel(_ref2){var whenActive=_ref2.whenActive,children=_ref2.children,rest=_objectWithoutProperties(_ref2,[\"whenActive\",\"children\"]);var _useContext2=useContext(context),activeTab=_useContext2.activeTab;return activeTab===whenActive?children:null;};var TabSwitcher=function TabSwitcher(_ref3){var children=_ref3.children,_ref3$initialTab=_ref3.initialTab,initialTab=_ref3$initialTab===void 0?1:_ref3$initialTab,_ref3$emitChanges=_ref3.emitChanges,emitChanges=_ref3$emitChanges===void 0?false:_ref3$emitChanges,id=_ref3.id;var _useState=useState(initialTab||1),_useState2=_slicedToArray(_useState,2),activeTab=_useState2[0],setActiveTab=_useState2[1];var tabIDs=[\"body\",\"top\",\"bottom\",\"accessories\"];var currentTabIndex=function currentTabIndex(){return tabIDs.indexOf(activeTab)||0;};var prevTab=function prevTab(){var prevTabIndex=currentTabIndex()>0?currentTabIndex()-1:tabIDs.length-1;changeTab(tabIDs[prevTabIndex]);};var nextTab=function nextTab(){var nextTabIndex=currentTabIndex()<tabIDs.length-1?currentTabIndex()+1:0;changeTab(tabIDs[nextTabIndex]);};var firstTab=function firstTab(){return changeTab(tabIDs[0]);};var lastTab=function lastTab(){return changeTab(tabIDs[tabIDs.length-1]);};var changeTab=function changeTab(newTab){setActiveTab(newTab);if(emitChanges){EventEmitter.emit(\"tabChange\",{tab:newTab,id:id});}};return React.createElement(Provider,{value:{activeTab:activeTab,changeTab:changeTab,prevTab:prevTab,nextTab:nextTab,firstTab:firstTab,lastTab:lastTab}},children);};export default memo(TabSwitcher);export{Tab,TabPanel,context};","map":{"version":3,"sources":["/var/www/html/startup/src/components/TabSwitcher/index.tsx"],"names":["React","memo","useState","createContext","useContext","useRef","useEffect","noop","clsx","EventEmitter","initialContext","activeTab","changeTab","prevTab","nextTab","firstTab","lastTab","context","Provider","Tab","props","id","children","className","rest","tabRef","keyPressed","event","key","current","focus","target","TabPanel","whenActive","TabSwitcher","initialTab","emitChanges","setActiveTab","tabIDs","currentTabIndex","indexOf","prevTabIndex","length","nextTabIndex","newTab","emit","tab"],"mappings":"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","sourcesContent":["import React, { memo, useState, createContext, useContext, useRef, useEffect, RefObject } from \"react\";\nimport noop from \"lodash-es/noop\";\nimport clsx from \"clsx\";\nimport EventEmitter from \"@/utils/event-emitter\";\n\ninterface ITabSwitcherContext {\n\tactiveTab: string | number;\n\tchangeTab: typeof noop;\n\tprevTab: typeof noop;\n\tnextTab: typeof noop;\n\tfirstTab: typeof noop;\n\tlastTab: typeof noop;\n}\n\nconst initialContext: ITabSwitcherContext = {\n\tactiveTab: 1,\n\tchangeTab: noop,\n\tprevTab: noop,\n\tnextTab: noop,\n\tfirstTab: noop,\n\tlastTab: noop\n};\n\nconst context = createContext(initialContext);\n\nconst { Provider } = context;\n\ninterface ITabProps {\n\tid: number | string;\n\tchildren: any;\n\t[key: string]: any;\n}\n\nconst Tab = (props: ITabProps) => {\n\tconst { id, children, className, ...rest } = props;\n\tconst { changeTab, activeTab, prevTab, nextTab, firstTab, lastTab } = useContext(context);\n\tconst tabRef: RefObject<HTMLButtonElement> = useRef(null);\n\n\tconst keyPressed = (event: React.KeyboardEvent<HTMLButtonElement>) => {\n\t\tswitch (event.key) {\n\t\t\tcase \"ArrowUp\":\n\t\t\t\tprevTab();\n\t\t\t\tbreak;\n\t\t\tcase \"ArrowDown\":\n\t\t\t\tnextTab();\n\t\t\t\tbreak;\n\t\t\tcase \"Home\":\n\t\t\t\tfirstTab();\n\t\t\t\tbreak;\n\t\t\tcase \"End\":\n\t\t\t\tlastTab();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif (activeTab === id) {\n\t\t\tif (tabRef && tabRef.current) {\n\t\t\t\ttabRef.current.focus();\n\t\t\t}\n\t\t}\n\t}, [id, activeTab])\n\n\treturn (\n\t\t<button\n\t\t\tref={tabRef}\n\t\t\tonKeyDown={keyPressed}\n\t\t\tclassName={clsx(\n\t\t\t\t\"tab-button\",\n\t\t\t\tactiveTab === id && \" tab-button--active\",\n\t\t\t\tactiveTab !== id && \" tab-button--inactive\",\n\t\t\t\t\"hoverable\",\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\trole=\"tab\"\n\t\t\ttabIndex={activeTab === id ? 0 : -1}\n\t\t\taria-selected={activeTab === id}\n\t\t\taria-controls={`${id}-panel`}\n\t\t\tonClick={({ target }) => changeTab(id, target)}\n\t\t\t{...rest}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n};\n\ninterface ITabPanelProps {\n\twhenActive: number | string;\n\tchildren: any;\n\t[key: string]: any;\n}\n\nconst TabPanel = ({ whenActive, children, ...rest }: ITabPanelProps) => {\n\tconst { activeTab } = useContext(context);\n\treturn activeTab === whenActive ? children : null;\n};\n\ninterface ITabSwitcherProps {\n\tchildren: any;\n\tinitialTab?: number | string;\n\temitChanges?: boolean;\n\tid?: string;\n}\n\nconst TabSwitcher = ({ children, initialTab = 1, emitChanges = false, id }: ITabSwitcherProps) => {\n\tconst [activeTab, setActiveTab] = useState(initialTab || 1);\n\n\tconst tabIDs: string[] = [\"body\", \"top\", \"bottom\", \"accessories\"]\n\n\tconst currentTabIndex = () => tabIDs.indexOf(activeTab as string) || 0;\n\tconst prevTab = () => {\n\t\tconst prevTabIndex: number = currentTabIndex() > 0 ? currentTabIndex() - 1 : tabIDs.length - 1;\n\t\tchangeTab(tabIDs[prevTabIndex]);\n\t}\n\n\tconst nextTab = () => {\n\t\tconst nextTabIndex: number = currentTabIndex() < tabIDs.length - 1 ? currentTabIndex() + 1 : 0;\n\t\tchangeTab(tabIDs[nextTabIndex]);\n\t}\n\n\tconst firstTab = () => changeTab(tabIDs[0])\n\n\tconst lastTab = () => changeTab(tabIDs[tabIDs.length - 1])\n\n\tconst changeTab = (newTab: number | string) => {\n\t\tsetActiveTab(newTab);\n\n\t\tif (emitChanges) {\n\t\t\tEventEmitter.emit(\"tabChange\", { tab: newTab, id });\n\t\t}\n\t};\n\n\treturn (\n\t\t<Provider\n\t\t\tvalue={{\n\t\t\t\tactiveTab,\n\t\t\t\tchangeTab,\n\t\t\t\tprevTab,\n\t\t\t\tnextTab,\n\t\t\t\tfirstTab,\n\t\t\t\tlastTab\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</Provider>\n\t);\n};\nexport default memo(TabSwitcher);\nexport { Tab, TabPanel, context };\n"]},"metadata":{},"sourceType":"module"}