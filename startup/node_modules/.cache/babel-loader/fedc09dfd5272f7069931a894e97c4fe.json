{"ast":null,"code":"import _regeneratorRuntime from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import CharacterRandomizer from\"@/components/CharacterRandomizer\";import{IdleScreenWrapper,IdleScreenContainer,Title,LogoContainer,Quide}from\"./styles\";import Logo from\"@/components/Logo\";import anime from\"animejs\";import noop from\"lodash-es/noop\";import Floorlight from\"@/graphics/floorlight\";import Lightbeam from\"@/graphics/lightbeam\";var IdleScreen=function IdleScreen(_ref){var _ref$onExit=_ref.onExit,onExit=_ref$onExit===void 0?noop:_ref$onExit;var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),isRunning=_React$useState2[0],setRunning=_React$useState2[1];var containerRef=React.createRef();var doExit=function doExit(){setRunning(false);anime.set(\".character-randomizer\",{willChange:\"transform\",translateX:0});anime.set(\".logo\",{willChange:\"transform\",translateX:0,translateY:0,scale:1});_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:anime({targets:\"#idle-title, #idle-quide\",opacity:[1,0],easing:\"linear\",duration:500});anime({targets:\".lightbeam, .floorlight\",opacity:[1,0],easing:\"linear\",duration:500});_context.next=4;return anime({targets:\".character-randomizer\",filter:[\"brightness(1)\",\"brightness(0)\"],easing:\"linear\",duration:500,endDelay:200}).finished;case 4:anime({targets:\".character-randomizer\",opacity:[1,0],duration:500,easing:\"linear\"});anime({targets:\"#idle-title, #idle-quote\",height:0,margin:0,duration:500,easing:\"linear\"});anime({targets:\"#idle-logo-container\",left:103,top:124,width:815,duration:500,easing:\"linear\",endDelay:500,complete:function complete(){return onExit();}});case 7:case\"end\":return _context.stop();}}},_callee);}))();};useEffect(function(){if(containerRef.current){containerRef.current.focus();}});return React.createElement(IdleScreenWrapper,{className:\"idle-screen-wrapper\",onKeyPress:doExit},React.createElement(\"div\",{className:\"lights\",id:\"idle-spotlight\"},React.createElement(Lightbeam,{className:\"lightbeam\"}),React.createElement(Floorlight,{className:\"floorlight\"})),React.createElement(IdleScreenContainer,{ref:containerRef,className:\"idle-screen-container\",tabIndex:0,onClick:doExit,onKeyDown:doExit},React.createElement(CharacterRandomizer,{running:isRunning}),React.createElement(LogoContainer,{id:\"idle-logo-container\"},React.createElement(Title,{id:\"idle-title\"},\"Create your own\"),React.createElement(Logo,null),React.createElement(Quide,{id:\"idle-quide\"},\"Touch the screen to start your adventure\"))));};export default IdleScreen;","map":{"version":3,"sources":["/var/www/html/startup/src/views/IdleScreen/index.tsx"],"names":["React","useEffect","CharacterRandomizer","IdleScreenWrapper","IdleScreenContainer","Title","LogoContainer","Quide","Logo","anime","noop","Floorlight","Lightbeam","IdleScreen","onExit","useState","isRunning","setRunning","containerRef","createRef","doExit","set","willChange","translateX","translateY","scale","targets","opacity","easing","duration","filter","endDelay","finished","height","margin","left","top","width","complete","current","focus"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport CharacterRandomizer from \"@/components/CharacterRandomizer\";\nimport { IdleScreenWrapper, IdleScreenContainer, Title, LogoContainer, Quide } from \"./styles\";\nimport Logo from \"@/components/Logo\";\nimport anime from \"animejs\";\nimport noop from \"lodash-es/noop\";\nimport Floorlight from \"@/graphics/floorlight\";\nimport Lightbeam from \"@/graphics/lightbeam\";\n\nconst IdleScreen = ({ onExit = noop }) => {\n  const [isRunning, setRunning] = React.useState(true);\n\n  const containerRef = React.createRef<HTMLDivElement>();\n  const doExit = () => {\n    setRunning(false);\n    anime.set(\".character-randomizer\", { willChange: \"transform\", translateX: 0 });\n    anime.set(\".logo\", { willChange: \"transform\", translateX: 0, translateY: 0, scale: 1 });\n\n    (async () => {\n      anime({\n        targets: \"#idle-title, #idle-quide\",\n        opacity: [1, 0],\n        easing: \"linear\",\n        duration: 500,\n      });\n      anime({\n        targets: \".lightbeam, .floorlight\",\n        opacity: [1, 0],\n        easing: \"linear\",\n        duration: 500,\n      });\n      await anime({\n        targets: \".character-randomizer\",\n        filter: [\"brightness(1)\", \"brightness(0)\"],\n        easing: \"linear\",\n        duration: 500,\n        endDelay: 200,\n      }).finished;\n      anime({\n        targets: \".character-randomizer\",\n        opacity: [1, 0],\n        duration: 500,\n        easing: \"linear\",\n      });\n      anime({\n        targets: \"#idle-title, #idle-quote\",\n        height: 0,\n        margin: 0,\n        duration: 500,\n        easing: \"linear\",\n      });\n      anime({\n        targets: \"#idle-logo-container\",\n        left: 103,\n        top: 124,\n        width: 815,\n        duration: 500,\n        easing: \"linear\",\n        endDelay: 500,\n        complete: () => onExit(),\n      });\n    })();\n  };\n\n  useEffect(() => {\n    if (containerRef.current) {\n      containerRef.current.focus();\n    }\n  });\n\n  return (\n    <IdleScreenWrapper className=\"idle-screen-wrapper\" onKeyPress={doExit}>\n      <div className=\"lights\" id=\"idle-spotlight\">\n        <Lightbeam className=\"lightbeam\" />\n        <Floorlight className=\"floorlight\" />\n      </div>\n      <IdleScreenContainer\n        ref={containerRef}\n        className=\"idle-screen-container\"\n        tabIndex={0}\n        onClick={doExit}\n        onKeyDown={doExit}\n      >\n        <CharacterRandomizer running={isRunning} />\n        <LogoContainer id=\"idle-logo-container\">\n          <Title id=\"idle-title\">Create your own</Title>\n          <Logo />\n          <Quide id=\"idle-quide\">Touch the screen to start your adventure</Quide>\n        </LogoContainer>\n      </IdleScreenContainer>\n    </IdleScreenWrapper>\n  );\n};\n\nexport default IdleScreen;\n"]},"metadata":{},"sourceType":"module"}