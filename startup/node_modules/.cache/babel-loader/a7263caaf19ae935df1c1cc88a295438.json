{"ast":null,"code":"import React,{useEffect,useCallback}from\"react\";import{ConfiguratorWrapper,Spotlight}from\"./styles\";import StartOver from\"@/components/StartOver\";import OptionPanels from\"@/components/OptionPanels\";import Character from\"@/components/Character\";import StepperFooter from\"@/components/Stepper/StepperFooter\";import anime from\"animejs\";import EventEmitter from\"@/utils/event-emitter\";import Lightbeam from\"@/graphics/lightbeam\";import Floorlight from\"@/graphics/floorlight\";import{useDispatch,useSelector}from\"react-redux\";import{characterActions}from\"@/redux/character\";var Configurator=function Configurator(){var dispatch=useDispatch();var _useSelector=useSelector(function(store){return store.character;}),viewedOptionTabs=_useSelector.viewedOptionTabs;var animateOptions=useCallback(function(){anime.set(\".option-panel\",{opacity:1});anime({targets:\".options-wrapper button, .options-wrapper .style-thumbnail, .options-wrapper h2\",opacity:[0,1],translateY:[70,0],delay:anime.stagger(10),duration:160,easing:\"easeOutExpo\",complete:function complete(){return animateCharacter();}});},[]);var animateCharacter=function animateCharacter(){anime({targets:\".character-container\",filter:\"brightness(1)\",duration:1000,easing:\"linear\"});anime({targets:\".spotlight svg\",opacity:1,duration:1000,easing:\"linear\"});};var animateInitial=useCallback(function(){anime.set(\".option-panel\",{opacity:0,translateY:50,willChange:\"transform, opacity\"});anime.set(\".option-tabs .tab-button\",{translateX:\"100%\"});anime.set(\".options-wrapper button, .options-wrapper .style-thumbnail, .options-wrapper h2\",{opacity:0,translateY:70});var tl=anime.timeline({easing:\"easeInOutExpo\"});tl.add({targets:\".option-panel\",translateY:0,opacity:1,complete:function complete(){return animateOptions();}});tl.add({targets:\".option-tabs .tab-button\",opacity:1,translateX:0,delay:anime.stagger(100)});anime({targets:\".view-quide-text\",opacity:[0,1],translateY:[30,0],easing:\"linear\",duration:500});},[animateOptions]);var beforeNext=function beforeNext(){return new Promise(function(resolve){anime({targets:\".option-panel > *\",opacity:[1,0],duration:350,easing:\"linear\"});anime({targets:\".view-quide-text\",opacity:[1,0],translateY:[0,-30],easing:\"linear\",duration:350});anime({targets:\".option-tabs .tab-button\",opacity:[1,0],translateX:[0,\"100%\"],easing:\"linear\",delay:anime.stagger(50),duration:function duration(el,i){return i*150+150;},complete:function complete(){return resolve();}});});};var hasViewedSomeOtherOptionTab=[\"top\",\"bottom\",\"accessories\"].some(function(key){return viewedOptionTabs.includes(key);});useEffect(function(){animateInitial();dispatch(characterActions.setViewedTab(\"body\"));EventEmitter.subscribe(\"tabChange\",function(_ref){var id=_ref.id,tab=_ref.tab;if(id===\"option-panels\"){dispatch(characterActions.setViewedTab(tab));requestAnimationFrame(animateOptions);}});return function(){anime.set(\".character-container\",{filter:\"brightness(1)\"});anime.set(\".spotlight svg\",{opacity:1});};},[animateInitial,animateOptions,dispatch]);return React.createElement(\"div\",null,React.createElement(\"p\",{className:\"view-quide-text\"},\"Explore and configure!\"),React.createElement(Spotlight,{className:\"spotlight\"},React.createElement(Lightbeam,{className:\"lightbeam\"}),React.createElement(Floorlight,{className:\"floorlight\"})),React.createElement(ConfiguratorWrapper,null,React.createElement(StartOver,null),React.createElement(Character,null),React.createElement(OptionPanels,null)),React.createElement(StepperFooter,{nextHtml:\"Ready? Add some stats\",beforeNext:beforeNext,nextDisabled:!hasViewedSomeOtherOptionTab}));};export default Configurator;","map":{"version":3,"sources":["/var/www/html/startup/src/views/Configurator/index.tsx"],"names":["React","useEffect","useCallback","ConfiguratorWrapper","Spotlight","StartOver","OptionPanels","Character","StepperFooter","anime","EventEmitter","Lightbeam","Floorlight","useDispatch","useSelector","characterActions","Configurator","dispatch","store","character","viewedOptionTabs","animateOptions","set","opacity","targets","translateY","delay","stagger","duration","easing","complete","animateCharacter","filter","animateInitial","willChange","translateX","tl","timeline","add","beforeNext","Promise","resolve","el","i","hasViewedSomeOtherOptionTab","some","key","includes","setViewedTab","subscribe","id","tab","requestAnimationFrame"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback } from \"react\";\nimport { ConfiguratorWrapper, Spotlight } from \"./styles\";\nimport StartOver from \"@/components/StartOver\";\nimport OptionPanels from \"@/components/OptionPanels\";\nimport Character from \"@/components/Character\";\nimport StepperFooter from \"@/components/Stepper/StepperFooter\";\nimport anime from \"animejs\";\nimport EventEmitter from \"@/utils/event-emitter\";\nimport Lightbeam from \"@/graphics/lightbeam\";\nimport Floorlight from \"@/graphics/floorlight\";\nimport { Dispatch } from \"redux\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { IStoreState } from \"@/interfaces/IStoreState\";\nimport { characterActions } from \"@/redux/character\";\n\nconst Configurator = () => {\n\tconst dispatch: Dispatch = useDispatch();\n\tconst { viewedOptionTabs } = useSelector((store: IStoreState) => store.character);\n\n\tconst animateOptions = useCallback(() => {\n\t\tanime.set(\".option-panel\", { opacity: 1 });\n\t\tanime({\n\t\t\ttargets: \".options-wrapper button, .options-wrapper .style-thumbnail, .options-wrapper h2\",\n\t\t\topacity: [0, 1],\n\t\t\ttranslateY: [70, 0],\n\t\t\tdelay: anime.stagger(10),\n\t\t\tduration: 160,\n\t\t\teasing: \"easeOutExpo\",\n\t\t\tcomplete: () => animateCharacter(),\n\t\t});\n\t}, []);\n\n\tconst animateCharacter = () => {\n\t\tanime({\n\t\t\ttargets: \".character-container\",\n\t\t\tfilter: \"brightness(1)\",\n\t\t\tduration: 1000,\n\t\t\teasing: \"linear\",\n\t\t});\n\t\tanime({\n\t\t\ttargets: \".spotlight svg\",\n\t\t\topacity: 1,\n\t\t\tduration: 1000,\n\t\t\teasing: \"linear\",\n\t\t});\n\t};\n\n\tconst animateInitial = useCallback(() => {\n\t\tanime.set(\".option-panel\", { opacity: 0, translateY: 50, willChange: \"transform, opacity\" });\n\t\tanime.set(\".option-tabs .tab-button\", { translateX: \"100%\" });\n\t\tanime.set(\".options-wrapper button, .options-wrapper .style-thumbnail, .options-wrapper h2\", {\n\t\t\topacity: 0,\n\t\t\ttranslateY: 70,\n\t\t});\n\t\tconst tl = anime.timeline({\n\t\t\teasing: \"easeInOutExpo\",\n\t\t});\n\t\ttl.add({\n\t\t\ttargets: \".option-panel\",\n\t\t\ttranslateY: 0,\n\t\t\topacity: 1,\n\t\t\tcomplete: () => animateOptions(),\n\t\t});\n\t\ttl.add({\n\t\t\ttargets: \".option-tabs .tab-button\",\n\t\t\topacity: 1,\n\t\t\ttranslateX: 0,\n\t\t\tdelay: anime.stagger(100),\n\t\t});\n\t\tanime({\n\t\t\ttargets: \".view-quide-text\",\n\t\t\topacity: [0, 1],\n\t\t\ttranslateY: [30, 0],\n\t\t\teasing: \"linear\",\n\t\t\tduration: 500,\n\t\t});\n\t}, [animateOptions]);\n\n\tconst beforeNext = () =>\n\t\tnew Promise<void>((resolve) => {\n\t\t\tanime({\n\t\t\t\ttargets: \".option-panel > *\",\n\t\t\t\topacity: [1, 0],\n\t\t\t\tduration: 350,\n\t\t\t\teasing: \"linear\",\n\t\t\t});\n\t\t\tanime({\n\t\t\t\ttargets: \".view-quide-text\",\n\t\t\t\topacity: [1, 0],\n\t\t\t\ttranslateY: [0, -30],\n\t\t\t\teasing: \"linear\",\n\t\t\t\tduration: 350,\n\t\t\t});\n\t\t\tanime({\n\t\t\t\ttargets: \".option-tabs .tab-button\",\n\t\t\t\topacity: [1, 0],\n\t\t\t\ttranslateX: [0, \"100%\"],\n\t\t\t\teasing: \"linear\",\n\t\t\t\tdelay: anime.stagger(50),\n\t\t\t\tduration: (el: any, i: number) => i * 150 + 150,\n\t\t\t\tcomplete: () => resolve(),\n\t\t\t});\n\t\t});\n\n\tconst hasViewedSomeOtherOptionTab = [\"top\", \"bottom\", \"accessories\"].some((key) => viewedOptionTabs.includes(key));\n\n\tuseEffect(() => {\n\t\tanimateInitial();\n\t\tdispatch(characterActions.setViewedTab(\"body\"));\n\n\t\tEventEmitter.subscribe(\"tabChange\", ({ id, tab }: { id: string; tab: string }) => {\n\t\t\tif (id === \"option-panels\") {\n\t\t\t\tdispatch(characterActions.setViewedTab(tab));\n\t\t\t\trequestAnimationFrame(animateOptions);\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\tanime.set(\".character-container\", { filter: \"brightness(1)\" });\n\t\t\tanime.set(\".spotlight svg\", { opacity: 1 });\n\t\t};\n\t}, [animateInitial, animateOptions, dispatch]);\n\n\treturn (\n\t\t<div>\n\t\t\t<p className=\"view-quide-text\">Explore and configure!</p>\n\t\t\t<Spotlight className=\"spotlight\">\n\t\t\t\t<Lightbeam className=\"lightbeam\" />\n\t\t\t\t<Floorlight className=\"floorlight\" />\n\t\t\t</Spotlight>\n\t\t\t<ConfiguratorWrapper>\n\t\t\t\t<StartOver />\n\t\t\t\t<Character />\n\t\t\t\t<OptionPanels />\n\t\t\t</ConfiguratorWrapper>\n\t\t\t<StepperFooter\n\t\t\t\tnextHtml=\"Ready? Add some stats\"\n\t\t\t\tbeforeNext={beforeNext}\n\t\t\t\tnextDisabled={!hasViewedSomeOtherOptionTab}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default Configurator;\n"]},"metadata":{},"sourceType":"module"}