{"ast":null,"code":"import _slicedToArray from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState}from\"react\";import{Thumbnail,Container,Swatches,ColorSwatch,Color,Wrapper,Header,Title,Deselector}from\"./styles\";import noop from\"lodash-es/noop\";import HorizontalScroller from\"@/components/HorizontalScroller\";import clsx from\"clsx\";var OptionColorSelectable=function OptionColorSelectable(props){var title=props.title,_props$onColorClicked=props.onColorClicked,onColorClicked=_props$onColorClicked===void 0?noop:_props$onColorClicked,thumbnail=props.thumbnail,_props$onResetClicked=props.onResetClicked,onResetClicked=_props$onResetClicked===void 0?noop:_props$onResetClicked,_props$onThumbClicked=props.onThumbClicked,onThumbClicked=_props$onThumbClicked===void 0?noop:_props$onThumbClicked,_props$activeColor=props.activeColor,activeColor=_props$activeColor===void 0?null:_props$activeColor,_props$colors=props.colors,colors=_props$colors===void 0?{}:_props$colors,_props$horizontal=props.horizontal,horizontal=_props$horizontal===void 0?false:_props$horizontal,_props$withHeader=props.withHeader,withHeader=_props$withHeader===void 0?true:_props$withHeader,_props$showTitle=props.showTitle,showTitle=_props$showTitle===void 0?false:_props$showTitle,_props$withSwatchCont=props.withSwatchContainer,withSwatchContainer=_props$withSwatchCont===void 0?true:_props$withSwatchCont,_props$withResetButto=props.withResetButton,withResetButton=_props$withResetButto===void 0?true:_props$withResetButto,className=props.className;var isActive=function isActive(name){return!!activeColor&&activeColor.name===name;};var isActiveFromColors=!!activeColor&&!!colors[activeColor.name];var ContainerElement=horizontal?HorizontalScroller:Container;var SwatchContainer=withSwatchContainer?Swatches:Fragment;var buttons=[];var setButtonRef=function setButtonRef(button){return buttons.push(button);};var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),focusedIndex=_useState2[0],setFocusedIndex=_useState2[1];var setInitialFocus=function setInitialFocus(e){if(focusedIndex!==undefined){return;}var selectedIndex=activeColor?Object.keys(colors).indexOf(activeColor.name):0;buttons[selectedIndex].focus();setFocusedIndex(selectedIndex);};var keyPress=function keyPress(event,index){switch(event.key){case\"ArrowRight\":event.preventDefault();if(index<buttons.length-1){var nextButton=buttons[index+1];nextButton.focus();setFocusedIndex(index+1);}break;case\"ArrowLeft\":event.preventDefault();if(index>0){var prevButton=buttons[index-1];prevButton.focus();setFocusedIndex(index-1);}break;case\"Home\":event.preventDefault();var firstButton=buttons[0];setFocusedIndex(0);firstButton.focus();break;case\"End\":event.preventDefault();var lastButton=buttons[buttons.length-1];setFocusedIndex(buttons.length-1);lastButton.focus();break;default:break;}};var onBlur=function onBlur(e){var newFocus=e.relatedTarget;if(e.relatedTarget&&buttons.indexOf(newFocus)<0){setFocusedIndex(undefined);}};return React.createElement(Wrapper,{hasThumbnail:!!thumbnail,isHorizontal:horizontal,className:className,tabIndex:focusedIndex?-1:0,onFocus:setInitialFocus,onBlur:onBlur},withHeader&&React.createElement(Header,null,showTitle&&React.createElement(Title,null,title),withResetButton&&!!onResetClicked&&React.createElement(Deselector,{disabled:!isActiveFromColors,onClick:onResetClicked},\"Deselect\")),React.createElement(ContainerElement,null,!!thumbnail&&React.createElement(Thumbnail,{active:isActiveFromColors,onClick:onThumbClicked},thumbnail(!!activeColor?{colors:activeColor.palette}:undefined)),React.createElement(SwatchContainer,null,Object.keys(colors).map(function(key,index){return React.createElement(ColorSwatch,{tabIndex:-1,ref:setButtonRef,onKeyDown:function onKeyDown(e){return keyPress(e,index);},key:key,onClick:function onClick(){return onColorClicked({name:key,palette:colors[key]});},active:isActive(key),className:clsx(isActive(key)&&\"is-active-button\")},colors[key].slice(0,3).map(function(color){return React.createElement(Color,{color:color,key:\"swtch_\".concat(key,\"_\").concat(color)});}));}))));};export default OptionColorSelectable;","map":{"version":3,"sources":["/var/www/html/startup/src/components/Selectables/option-color-selectable.tsx"],"names":["React","Fragment","useState","Thumbnail","Container","Swatches","ColorSwatch","Color","Wrapper","Header","Title","Deselector","noop","HorizontalScroller","clsx","OptionColorSelectable","props","title","onColorClicked","thumbnail","onResetClicked","onThumbClicked","activeColor","colors","horizontal","withHeader","showTitle","withSwatchContainer","withResetButton","className","isActive","name","isActiveFromColors","ContainerElement","SwatchContainer","buttons","setButtonRef","button","push","undefined","focusedIndex","setFocusedIndex","setInitialFocus","e","selectedIndex","Object","keys","indexOf","focus","keyPress","event","index","key","preventDefault","length","nextButton","prevButton","firstButton","lastButton","onBlur","newFocus","relatedTarget","palette","map","slice","color"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from \"react\";\nimport { Thumbnail, Container, Swatches, ColorSwatch, Color, Wrapper, Header, Title, Deselector } from \"./styles\";\nimport noop from \"lodash-es/noop\";\nimport HorizontalScroller from \"@/components/HorizontalScroller\";\nimport { Colors, IColorOptions } from \"@/interfaces/Colors\";\nimport clsx from \"clsx\";\n\ninterface IProps {\n\tactiveColor?: { name: string; palette: Colors };\n\tonColorClicked: (color: { name: string; palette: Colors }) => void;\n\tonResetClicked?: () => void;\n\tonThumbClicked?: () => void;\n\tthumbnail?: Function;\n\tcolors: IColorOptions;\n\thorizontal?: boolean;\n\ttitle: string;\n\tshowTitle?: boolean;\n\twithHeader?: boolean;\n\twithSwatchContainer?: boolean;\n\twithResetButton?: boolean;\n\tclassName?: string;\n}\n\nconst OptionColorSelectable = (props: IProps) => {\n\tconst {\n\t\ttitle,\n\t\tonColorClicked = noop,\n\t\tthumbnail,\n\t\tonResetClicked = noop,\n\t\tonThumbClicked = noop,\n\t\tactiveColor = null,\n\t\tcolors = {},\n\t\thorizontal = false,\n\t\twithHeader = true,\n\t\tshowTitle = false,\n\t\twithSwatchContainer = true,\n\t\twithResetButton = true,\n\t\tclassName,\n\t} = props;\n\tconst isActive = (name: string): boolean => !!activeColor && activeColor.name === name;\n\tconst isActiveFromColors = !!activeColor && !!colors[activeColor.name];\n\n\tconst ContainerElement = horizontal ? HorizontalScroller : Container;\n\tconst SwatchContainer = withSwatchContainer ? Swatches : Fragment;\n\n\tlet buttons: HTMLElement[] = [];\n\tconst setButtonRef = (button: HTMLButtonElement) => buttons.push(button);\n\n\tconst [focusedIndex, setFocusedIndex] = useState<number | undefined>(undefined);\n\n\tconst setInitialFocus = (e: React.FocusEvent<HTMLDivElement>) => {\n\t\tif (focusedIndex !== undefined) {\n\t\t\treturn;\n\t\t}\n\t\tlet selectedIndex = activeColor ? Object.keys(colors).indexOf(activeColor.name) : 0;\n\t\tbuttons[selectedIndex].focus();\n\t\tsetFocusedIndex(selectedIndex);\n\t};\n\n\tconst keyPress = (event: React.KeyboardEvent<HTMLElement>, index: number) => {\n\t\tswitch (event.key) {\n\t\t\tcase \"ArrowRight\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (index < buttons.length - 1) {\n\t\t\t\t\tconst nextButton = buttons[index + 1];\n\t\t\t\t\tnextButton.focus();\n\t\t\t\t\tsetFocusedIndex(index + 1);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (index > 0) {\n\t\t\t\t\tconst prevButton = buttons[index - 1];\n\t\t\t\t\tprevButton.focus();\n\t\t\t\t\tsetFocusedIndex(index - 1);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"Home\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst firstButton = buttons[0];\n\t\t\t\tsetFocusedIndex(0);\n\t\t\t\tfirstButton.focus();\n\t\t\t\tbreak;\n\t\t\tcase \"End\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst lastButton = buttons[buttons.length - 1];\n\t\t\t\tsetFocusedIndex(buttons.length - 1);\n\t\t\t\tlastButton.focus();\n\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\tconst onBlur = (e: React.FocusEvent<HTMLDivElement>) => {\n\t\tconst newFocus: (EventTarget & HTMLElement) | null = e.relatedTarget as EventTarget & HTMLElement;\n\t\tif (e.relatedTarget && buttons.indexOf(newFocus) < 0) {\n\t\t\tsetFocusedIndex(undefined);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Wrapper\n\t\t\thasThumbnail={!!thumbnail}\n\t\t\tisHorizontal={horizontal}\n\t\t\tclassName={className}\n\t\t\ttabIndex={focusedIndex ? -1 : 0}\n\t\t\tonFocus={setInitialFocus}\n\t\t\tonBlur={onBlur}\n\t\t>\n\t\t\t{withHeader && (\n\t\t\t\t<Header>\n\t\t\t\t\t{showTitle && <Title>{title}</Title>}\n\t\t\t\t\t{withResetButton && !!onResetClicked && (\n\t\t\t\t\t\t<Deselector disabled={!isActiveFromColors} onClick={onResetClicked}>\n\t\t\t\t\t\t\tDeselect\n\t\t\t\t\t\t</Deselector>\n\t\t\t\t\t)}\n\t\t\t\t</Header>\n\t\t\t)}\n\t\t\t<ContainerElement>\n\t\t\t\t{!!thumbnail && (\n\t\t\t\t\t<Thumbnail active={isActiveFromColors} onClick={onThumbClicked}>\n\t\t\t\t\t\t{thumbnail(!!activeColor ? { colors: activeColor.palette } : undefined)}\n\t\t\t\t\t</Thumbnail>\n\t\t\t\t)}\n\t\t\t\t<SwatchContainer>\n\t\t\t\t\t{Object.keys(colors).map((key: string, index: number) => (\n\t\t\t\t\t\t<ColorSwatch\n\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t\tref={setButtonRef}\n\t\t\t\t\t\t\tonKeyDown={(e) => keyPress(e, index)}\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\tonClick={() => onColorClicked({ name: key, palette: colors[key] })}\n\t\t\t\t\t\t\tactive={isActive(key)}\n\t\t\t\t\t\t\tclassName={clsx(isActive(key) && \"is-active-button\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{colors[key].slice(0, 3).map((color: string | undefined) => (\n\t\t\t\t\t\t\t\t<Color color={color} key={`swtch_${key}_${color}`} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ColorSwatch>\n\t\t\t\t\t))}\n\t\t\t\t</SwatchContainer>\n\t\t\t</ContainerElement>\n\t\t</Wrapper>\n\t);\n};\n\nexport default OptionColorSelectable;\n"]},"metadata":{},"sourceType":"module"}