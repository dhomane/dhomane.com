{"ast":null,"code":"import _regeneratorRuntime from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/var/www/html/startup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect,useCallback}from\"react\";import{StatsWrapper,Spotlight}from\"./styles\";import StartOver from\"@/components/StartOver\";import Character from\"@/components/Character\";import StatPanels from\"@/components/StatPanels\";import StepperFooter from\"@/components/Stepper/StepperFooter\";import{useSelector,useDispatch}from\"react-redux\";import EventEmitter from\"@/utils/event-emitter\";import anime from\"animejs\";import Lightbeam from\"@/graphics/lightbeam\";import Floorlight from\"@/graphics/floorlight\";import{characterActions}from\"@/redux/character\";var Stats=function Stats(){var _useSelector=useSelector(function(store){return store.stats;}),statPointsAvailable=_useSelector.statPointsAvailable,selectedStats=_useSelector.selectedStats,gradedStats=_useSelector.gradedStats;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDistributeViewed=_useState2[0],setDistributeViewed=_useState2[1];var dispatch=useDispatch();var isDone=statPointsAvailable===0&&selectedStats.length===4&&gradedStats.length===4&&isDistributeViewed;var animateInitial=function animateInitial(){var tl=anime.timeline({easing:\"easeInOutExpo\"});tl.add({targets:\".stats-panel > *\",opacity:1,translateY:0,delay:anime.stagger(100),duration:400});tl.add({targets:\".stat-panel-tabs .tab-button\",opacity:1,translateX:0,delay:anime.stagger(100)});anime({targets:\".view-quide-text\",opacity:[0,1],translateY:[30,0],easing:\"linear\",duration:500});};var animateOptions=useCallback(function(){anime.set(\".stats-panel > *\",{opacity:1});anime({targets:\".option-list button\",opacity:[0,1],translateY:[50,0],delay:anime.stagger(90),duration:350,easing:\"easeOutExpo\"});},[]);var animateTabs=useCallback(function(){anime.set(\".option-list button\",{opacity:0});animateOptions();},[animateOptions]);var animateStatBoxes=function animateStatBoxes(){anime({targets:\".skill-container\",opacity:[0,1],translateY:[70,0],delay:anime.stagger(100),duration:350,easing:\"easeOutExpo\"});};var beforeNext=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var time;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:time=new Date().toJSON();dispatch(characterActions.setEndTime(time));anime.set(\"span.flash\",{background:\"#FFFFFF\",height:\"100%\",left:0,opacity:0,position:\"absolute\",top:0,width:\"100%\",zIndex:10000});_context.next=5;return anime({targets:\".flash\",opacity:[0,1,0.6,1],easing:\"easeOutExpo\",duration:350}).finished;case 5:case\"end\":return _context.stop();}}},_callee);}));return function beforeNext(){return _ref.apply(this,arguments);};}();useEffect(function(){var rendering=true;anime.set(\".character-container\",{filter:\"brightness(1)\"});anime.set(\".spotlight\",{opacity:1});anime.set(\".stat-panel-tabs .tab-button\",{opacity:0,translateX:\"100%\"});anime.set(\".stats-panel > *\",{opacity:0,translateY:40});requestAnimationFrame(animateInitial);EventEmitter.subscribe(\"tabChange\",function(_ref2){var id=_ref2.id,tab=_ref2.tab;if(id===\"stats\"){if(tab===\"choose\")requestAnimationFrame(animateTabs);if(tab===\"distribute\"){if(rendering)setDistributeViewed(true);requestAnimationFrame(animateStatBoxes);}}if(id===\"stat-categories\"){requestAnimationFrame(animateOptions);}});return function(){rendering=false;};},[animateTabs,animateOptions]);return React.createElement(Fragment,null,React.createElement(\"p\",{className:\"view-quide-text\"},\"What are your strengths?\"),React.createElement(Spotlight,{className:\"spotlight\"},React.createElement(Lightbeam,{className:\"lightbeam\"}),React.createElement(Floorlight,{className:\"floorlight\"})),React.createElement(StartOver,null),React.createElement(StatsWrapper,{id:\"stats-wrapper\"},React.createElement(Character,null),React.createElement(StatPanels,null)),React.createElement(StepperFooter,{nextHtml:\"All done!\",nextDisabled:!isDone,beforeNext:beforeNext}));};export default Stats;","map":{"version":3,"sources":["/var/www/html/startup/src/views/Stats/index.tsx"],"names":["React","Fragment","useState","useEffect","useCallback","StatsWrapper","Spotlight","StartOver","Character","StatPanels","StepperFooter","useSelector","useDispatch","EventEmitter","anime","Lightbeam","Floorlight","characterActions","Stats","store","stats","statPointsAvailable","selectedStats","gradedStats","isDistributeViewed","setDistributeViewed","dispatch","isDone","length","animateInitial","tl","timeline","easing","add","targets","opacity","translateY","delay","stagger","duration","translateX","animateOptions","set","animateTabs","animateStatBoxes","beforeNext","time","Date","toJSON","setEndTime","background","height","left","position","top","width","zIndex","finished","rendering","filter","requestAnimationFrame","subscribe","id","tab"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect, useCallback } from \"react\";\nimport { StatsWrapper, Spotlight } from \"./styles\";\nimport StartOver from \"@/components/StartOver\";\nimport Character from \"@/components/Character\";\nimport StatPanels from \"@/components/StatPanels\";\nimport StepperFooter from \"@/components/Stepper/StepperFooter\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { IStoreState } from \"@/interfaces/IStoreState\";\nimport EventEmitter from \"@/utils/event-emitter\";\nimport anime from \"animejs\";\nimport Lightbeam from \"@/graphics/lightbeam\";\nimport Floorlight from \"@/graphics/floorlight\";\nimport { Dispatch } from \"redux\";\nimport { characterActions } from \"@/redux/character\";\n\nconst Stats = () => {\n\tconst { statPointsAvailable, selectedStats, gradedStats } = useSelector((store: IStoreState) => store.stats);\n\tconst [isDistributeViewed, setDistributeViewed] = useState(false);\n\tconst dispatch: Dispatch = useDispatch();\n\n\tconst isDone =\n\t\tstatPointsAvailable === 0 && selectedStats.length === 4 && gradedStats.length === 4 && isDistributeViewed;\n\n\tconst animateInitial = () => {\n\t\tconst tl = anime.timeline({ easing: \"easeInOutExpo\" });\n\t\ttl.add({\n\t\t\ttargets: \".stats-panel > *\",\n\t\t\topacity: 1,\n\t\t\ttranslateY: 0,\n\t\t\tdelay: anime.stagger(100),\n\t\t\tduration: 400,\n\t\t});\n\t\ttl.add({\n\t\t\ttargets: \".stat-panel-tabs .tab-button\",\n\t\t\topacity: 1,\n\t\t\ttranslateX: 0,\n\t\t\tdelay: anime.stagger(100),\n\t\t});\n\t\tanime({\n\t\t\ttargets: \".view-quide-text\",\n\t\t\topacity: [0, 1],\n\t\t\ttranslateY: [30, 0],\n\t\t\teasing: \"linear\",\n\t\t\tduration: 500,\n\t\t});\n\t};\n\n\tconst animateOptions = useCallback(() => {\n\t\tanime.set(\".stats-panel > *\", { opacity: 1 });\n\t\tanime({\n\t\t\ttargets: \".option-list button\",\n\t\t\topacity: [0, 1],\n\t\t\ttranslateY: [50, 0],\n\t\t\tdelay: anime.stagger(90),\n\t\t\tduration: 350,\n\t\t\teasing: \"easeOutExpo\",\n\t\t});\n\t}, []);\n\n\tconst animateTabs = useCallback(() => {\n\t\tanime.set(\".option-list button\", { opacity: 0 });\n\t\tanimateOptions();\n\t}, [animateOptions]);\n\n\tconst animateStatBoxes = () => {\n\t\tanime({\n\t\t\ttargets: \".skill-container\",\n\t\t\topacity: [0, 1],\n\t\t\ttranslateY: [70, 0],\n\t\t\tdelay: anime.stagger(100),\n\t\t\tduration: 350,\n\t\t\teasing: \"easeOutExpo\",\n\t\t});\n\t};\n\n\tconst beforeNext = async () => {\n\t\tconst time = new Date().toJSON();\n\t\tdispatch(characterActions.setEndTime(time));\n\n\t\tanime.set(\"span.flash\", {\n\t\t\tbackground: \"#FFFFFF\",\n\t\t\theight: \"100%\",\n\t\t\tleft: 0,\n\t\t\topacity: 0,\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 0,\n\t\t\twidth: \"100%\",\n\t\t\tzIndex: 10000,\n\t\t});\n\n\t\tawait anime({\n\t\t\ttargets: \".flash\",\n\t\t\topacity: [0, 1, 0.6, 1],\n\t\t\teasing: \"easeOutExpo\",\n\t\t\tduration: 350,\n\t\t}).finished;\n\t};\n\n\tuseEffect(() => {\n\t\tlet rendering = true;\n\t\tanime.set(\".character-container\", { filter: \"brightness(1)\" });\n\t\tanime.set(\".spotlight\", { opacity: 1 });\n\t\tanime.set(\".stat-panel-tabs .tab-button\", { opacity: 0, translateX: \"100%\" });\n\t\tanime.set(\".stats-panel > *\", { opacity: 0, translateY: 40 });\n\n\t\trequestAnimationFrame(animateInitial);\n\n\t\tEventEmitter.subscribe(\"tabChange\", ({ id, tab }: { id: string; tab: string }) => {\n\t\t\tif (id === \"stats\") {\n\t\t\t\tif (tab === \"choose\") requestAnimationFrame(animateTabs);\n\t\t\t\tif (tab === \"distribute\") {\n\t\t\t\t\tif (rendering) setDistributeViewed(true);\n\t\t\t\t\trequestAnimationFrame(animateStatBoxes);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (id === \"stat-categories\") {\n\t\t\t\trequestAnimationFrame(animateOptions);\n\t\t\t}\n\t\t});\n\n\t\treturn () => {\n\t\t\trendering = false;\n\t\t};\n\t}, [animateTabs, animateOptions]);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<p className=\"view-quide-text\">What are your strengths?</p>\n\t\t\t<Spotlight className=\"spotlight\">\n\t\t\t\t<Lightbeam className=\"lightbeam\" />\n\t\t\t\t<Floorlight className=\"floorlight\" />\n\t\t\t</Spotlight>\n\t\t\t<StartOver />\n\t\t\t<StatsWrapper id=\"stats-wrapper\">\n\t\t\t\t<Character />\n\t\t\t\t<StatPanels />\n\t\t\t</StatsWrapper>\n\t\t\t<StepperFooter nextHtml=\"All done!\" nextDisabled={!isDone} beforeNext={beforeNext} />\n\t\t</Fragment>\n\t);\n};\n\nexport default Stats;\n"]},"metadata":{},"sourceType":"module"}