{"ast":null,"code":"import{useEffect,useCallback}from\"react\";function useTabIndicator(buttonContainerRef,indicatorRef){var setIndicatorPosition=useCallback(function(){var container=buttonContainerRef.current;var indicator=indicatorRef.current;var activeButton=container?container.querySelector(\".tab-button--active\"):null;if(activeButton&&indicator){var buttonLeft=activeButton.offsetLeft;var buttonWidth=activeButton.offsetWidth;var indicatorWidth=indicator.offsetWidth;var deltaWidth=buttonWidth/indicatorWidth;indicator.style.transform=\"translateX(\".concat(buttonLeft,\"px) scaleX(\").concat(deltaWidth,\")\");}},[buttonContainerRef,indicatorRef]);var onContainerClick=useCallback(function(_ref){var target=_ref.target;requestAnimationFrame(function(){if(target.className.indexOf(\"tab-button\")!==-1){setIndicatorPosition();}});},[setIndicatorPosition]);useEffect(function(){var initTimeout;var indicator=indicatorRef.current;if(indicator){initTimeout=window.setTimeout(function(){setIndicatorPosition();if(indicator)indicator.style.opacity=\"1\";},300);return function(){clearTimeout(initTimeout);if(indicator)indicator.style.opacity=\"0\";};}},[indicatorRef,setIndicatorPosition]);useEffect(function(){var buttonContainer=buttonContainerRef.current;if(buttonContainer){buttonContainer.style.position=\"relative\";buttonContainer.addEventListener(\"click\",onContainerClick);return function(){if(buttonContainer)buttonContainer.removeEventListener(\"click\",onContainerClick);};}},[buttonContainerRef,onContainerClick]);}export default useTabIndicator;","map":{"version":3,"sources":["/var/www/html/startup/src/hooks/use-tab-indicator.tsx"],"names":["useEffect","useCallback","useTabIndicator","buttonContainerRef","indicatorRef","setIndicatorPosition","container","current","indicator","activeButton","querySelector","buttonLeft","offsetLeft","buttonWidth","offsetWidth","indicatorWidth","deltaWidth","style","transform","onContainerClick","target","requestAnimationFrame","className","indexOf","initTimeout","window","setTimeout","opacity","clearTimeout","buttonContainer","position","addEventListener","removeEventListener"],"mappings":"AAAA,OAASA,SAAT,CAA+BC,WAA/B,KAAkD,OAAlD,CAEA,QAASC,CAAAA,eAAT,CAAyBC,kBAAzB,CAAqEC,YAArE,CAA2G,CAC1G,GAAMC,CAAAA,oBAAoB,CAAGJ,WAAW,CAAC,UAAM,IAC7BK,CAAAA,SAD6B,CACfH,kBADe,CACtCI,OADsC,IAE7BC,CAAAA,SAF6B,CAEfJ,YAFe,CAEtCG,OAFsC,CAG9C,GAAME,CAAAA,YAAY,CAAGH,SAAS,CAAIA,SAAS,CAACI,aAAV,CAAwB,qBAAxB,CAAJ,CAAqE,IAAnG,CAEA,GAAID,YAAY,EAAID,SAApB,CAA+B,CAC9B,GAAMG,CAAAA,UAAU,CAAGF,YAAY,CAACG,UAAhC,CACA,GAAMC,CAAAA,WAAW,CAAGJ,YAAY,CAACK,WAAjC,CACA,GAAMC,CAAAA,cAAc,CAAGP,SAAS,CAACM,WAAjC,CACA,GAAME,CAAAA,UAAU,CAAGH,WAAW,CAAGE,cAAjC,CAEAP,SAAS,CAACS,KAAV,CAAgBC,SAAhB,sBAA0CP,UAA1C,uBAAkEK,UAAlE,MACA,CACD,CAbuC,CAarC,CAACb,kBAAD,CAAqBC,YAArB,CAbqC,CAAxC,CAeA,GAAMe,CAAAA,gBAAgB,CAAGlB,WAAW,CACnC,cAAqB,IAAlBmB,CAAAA,MAAkB,MAAlBA,MAAkB,CACpBC,qBAAqB,CAAC,UAAM,CAC3B,GAAID,MAAM,CAACE,SAAP,CAAiBC,OAAjB,CAAyB,YAAzB,IAA2C,CAAC,CAAhD,CAAmD,CAClDlB,oBAAoB,GACpB,CACD,CAJoB,CAArB,CAKA,CAPkC,CAQnC,CAACA,oBAAD,CARmC,CAApC,CAWAL,SAAS,CAAC,UAAM,CACf,GAAIwB,CAAAA,WAAJ,CAEA,GAAMhB,CAAAA,SAAS,CAAGJ,YAAY,CAACG,OAA/B,CAEA,GAAIC,SAAJ,CAAe,CACdgB,WAAW,CAAGC,MAAM,CAACC,UAAP,CAAkB,UAAM,CACrCrB,oBAAoB,GACpB,GAAIG,SAAJ,CAAeA,SAAS,CAACS,KAAV,CAAgBU,OAAhB,CAA0B,GAA1B,CACf,CAHa,CAGX,GAHW,CAAd,CAKA,MAAO,WAAM,CACZC,YAAY,CAACJ,WAAD,CAAZ,CACA,GAAIhB,SAAJ,CAAeA,SAAS,CAACS,KAAV,CAAgBU,OAAhB,CAA0B,GAA1B,CACf,CAHD,CAIA,CACD,CAhBQ,CAgBN,CAACvB,YAAD,CAAeC,oBAAf,CAhBM,CAAT,CAkBAL,SAAS,CAAC,UAAM,CACf,GAAM6B,CAAAA,eAAe,CAAG1B,kBAAkB,CAACI,OAA3C,CACA,GAAIsB,eAAJ,CAAqB,CACpBA,eAAe,CAACZ,KAAhB,CAAsBa,QAAtB,CAAiC,UAAjC,CACAD,eAAe,CAACE,gBAAhB,CAAiC,OAAjC,CAA0CZ,gBAA1C,EAEA,MAAO,WAAM,CACZ,GAAIU,eAAJ,CAAqBA,eAAe,CAACG,mBAAhB,CAAoC,OAApC,CAA6Cb,gBAA7C,EACrB,CAFD,CAGA,CACD,CAVQ,CAUN,CAAChB,kBAAD,CAAqBgB,gBAArB,CAVM,CAAT,CAWA,CAED,cAAejB,CAAAA,eAAf","sourcesContent":["import { useEffect, RefObject, useCallback } from \"react\";\n\nfunction useTabIndicator(buttonContainerRef: RefObject<HTMLElement>, indicatorRef: RefObject<HTMLElement>) {\n\tconst setIndicatorPosition = useCallback(() => {\n\t\tconst { current: container } = buttonContainerRef;\n\t\tconst { current: indicator } = indicatorRef;\n\t\tconst activeButton = container ? (container.querySelector(\".tab-button--active\") as HTMLElement) : null;\n\n\t\tif (activeButton && indicator) {\n\t\t\tconst buttonLeft = activeButton.offsetLeft;\n\t\t\tconst buttonWidth = activeButton.offsetWidth;\n\t\t\tconst indicatorWidth = indicator.offsetWidth;\n\t\t\tconst deltaWidth = buttonWidth / indicatorWidth;\n\n\t\t\tindicator.style.transform = `translateX(${buttonLeft}px) scaleX(${deltaWidth})`;\n\t\t}\n\t}, [buttonContainerRef, indicatorRef]);\n\n\tconst onContainerClick = useCallback(\n\t\t({ target }: any) => {\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tif (target.className.indexOf(\"tab-button\") !== -1) {\n\t\t\t\t\tsetIndicatorPosition();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[setIndicatorPosition]\n\t);\n\n\tuseEffect(() => {\n\t\tlet initTimeout: number;\n\n\t\tconst indicator = indicatorRef.current;\n\n\t\tif (indicator) {\n\t\t\tinitTimeout = window.setTimeout(() => {\n\t\t\t\tsetIndicatorPosition();\n\t\t\t\tif (indicator) indicator.style.opacity = \"1\";\n\t\t\t}, 300);\n\n\t\t\treturn () => {\n\t\t\t\tclearTimeout(initTimeout);\n\t\t\t\tif (indicator) indicator.style.opacity = \"0\";\n\t\t\t};\n\t\t}\n\t}, [indicatorRef, setIndicatorPosition]);\n\n\tuseEffect(() => {\n\t\tconst buttonContainer = buttonContainerRef.current;\n\t\tif (buttonContainer) {\n\t\t\tbuttonContainer.style.position = \"relative\";\n\t\t\tbuttonContainer.addEventListener(\"click\", onContainerClick);\n\n\t\t\treturn () => {\n\t\t\t\tif (buttonContainer) buttonContainer.removeEventListener(\"click\", onContainerClick);\n\t\t\t};\n\t\t}\n\t}, [buttonContainerRef, onContainerClick]);\n}\n\nexport default useTabIndicator;\n"]},"metadata":{},"sourceType":"module"}